(this["webpackJsonpmedium-clone-with-mern"]=this["webpackJsonpmedium-clone-with-mern"]||[]).push([[7],{108:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(31),i=a(654),l=a(622),o=a(109),s=a.n(o),u=a(95);a(114);t.a=function(){return n.a.createElement("div",{className:"header-wrapper"},n.a.createElement("div",{className:"ui container"},n.a.createElement(i.a,{secondary:!0,className:"site-header"},n.a.createElement(i.a.Item,{name:"logo",className:"logo",as:c.b,to:"/"},n.a.createElement(l.a,{src:s.a,alt:"Logo"})),n.a.createElement(i.a.Item,{name:"topStories"},n.a.createElement(c.b,{to:"/"},"Top Stories")),n.a.createElement(i.a.Menu,{position:"right",className:"sign-in"},n.a.createElement(i.a.Item,{name:"signin"},n.a.createElement(u.a,null))))))}},109:function(e,t,a){e.exports=a.p+"static/media/stories-logo.a38b51bf.svg"},112:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},139:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"g",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"c",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return b}));var r=a(9),n=a.n(r),c=a(15),i=a(25),l=a(2),o=a(23),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(c.a)(n.a.mark((function t(a){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("/articles/feed?page=".concat(e));case 2:r=t.sent,a({type:1===e?l.LOAD_ARTICLES:l.LOAD_MORE_ARTICLES,payload:r.data.articles});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u=function(){return function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:l.RESET_ARTICLES});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/articles/popular");case 2:a=e.sent,t({type:l.LOAD_ARTICLES_POPULAR,payload:a.data.articles});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(a){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("/articles/"+e);case 2:(r=t.sent).data&&a({type:l.LOAD_ARTICLE_DETAILS_SUCCESS,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(o.a)(a),e.next=3,i.a.get("/articles/me",r);case 3:(c=e.sent).data&&t({type:l.LOAD_MY_ARTICLES,payload:c.data});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(o.a)(r),t.next=3,i.a.delete("articles/"+e,c);case 3:t.sent.data.success&&a({type:l.DELETE_ARTICLE_SUCCESS,payload:e});case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(o.a)(r),t.next=3,i.a.patch("articles/".concat(e,"/clap"),c);case 3:(s=t.sent).data.success&&a({type:l.ARTICLE_CLAP_SUCCESS,payload:s.data.article});case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},140:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(33);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,n=!1,c=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(o){n=!0,c=o}finally{try{r||null==l.return||l.return()}finally{if(n)throw c}}return a}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},190:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(108),i=(a(115),a(651)),l=a(95),o=a(31),s=a(18),u=a(23);t.a=Object(s.b)((function(e){return{auth:e.auth}}),{requireAuthorization:u.f})((function(e){var t=e.auth,a=e.children,s=e.requireAuthorization;return Object(r.useEffect)((function(){return s(!0),function(){s(!1)}}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:!t.isAuthenticated&&t.currentPageNeedAuthorization?"":"hidden"},n.a.createElement("div",{className:"app-overlay",style:{position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:1}},n.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},n.a.createElement(i.a,{padding:"big",style:{padding:"50px 50px 65px",textAlign:"center"}},n.a.createElement(i.a.Header,{style:{marginBottom:"20px"}},"You need to sign in to access this page"),n.a.createElement(l.a,null),n.a.createElement("div",{style:{marginTop:"2rem"}},"Or back to ",n.a.createElement(o.b,{className:"link",to:"/"},"Home page")))))),n.a.createElement(c.a,null),n.a.createElement("div",{className:"page-content"},a))}))},257:function(e,t,a){"use strict";var r=a(79),n=a.n(r),c=a(80),i=a.n(c),l=(a(14),a(0)),o=a.n(l),s=a(116),u=a(292),m=a(293),d=a(78);function p(e){var t=e.children,a=e.className,r=e.content,c=e.fluid,l=e.text,f=e.textAlign,b=i()("ui",Object(s.a)(l,"text"),Object(s.a)(c,"fluid"),Object(s.d)(f),"container",a),E=Object(u.a)(p,e),h=Object(m.a)(p,e);return o.a.createElement(h,n()({},E,{className:b}),d.a.isNil(t)?r:t)}p.handledProps=["as","children","className","content","fluid","text","textAlign"],p.propTypes={},t.a=p},371:function(e,t,a){"use strict";var r=a(79),n=a.n(r),c=(a(94),a(80)),i=a.n(c),l=(a(14),a(0)),o=a.n(l),s=a(116),u=a(292),m=a(293),d=a(78),p=a(373),f=a(622),b=a(315);function E(e){var t=e.children,a=e.className,r=e.content,c=i()("sub header",a),l=Object(u.a)(E,e),s=Object(m.a)(E,e);return o.a.createElement(s,n()({},l,{className:c}),d.a.isNil(t)?r:t)}E.handledProps=["as","children","className","content"],E.propTypes={},E.create=Object(b.e)(E,(function(e){return{content:e}}));var h=E;function g(e){var t=e.children,a=e.className,r=e.content,c=i()("content",a),l=Object(u.a)(g,e),s=Object(m.a)(g,e);return o.a.createElement(s,n()({},l,{className:c}),d.a.isNil(t)?r:t)}g.handledProps=["as","children","className","content"],g.propTypes={};var v=g;function y(e){var t=e.attached,a=e.block,r=e.children,c=e.className,l=e.color,b=e.content,E=e.disabled,g=e.dividing,O=e.floated,w=e.icon,j=e.image,N=e.inverted,S=e.size,x=e.sub,A=e.subheader,I=e.textAlign,k=i()("ui",l,S,Object(s.a)(a,"block"),Object(s.a)(E,"disabled"),Object(s.a)(g,"dividing"),Object(s.e)(O,"floated"),Object(s.a)(!0===w,"icon"),Object(s.a)(!0===j,"image"),Object(s.a)(N,"inverted"),Object(s.a)(x,"sub"),Object(s.b)(t,"attached"),Object(s.d)(I),"header",c),C=Object(u.a)(y,e),L=Object(m.a)(y,e);if(!d.a.isNil(r))return o.a.createElement(L,n()({},C,{className:k}),r);var T=p.a.create(w,{autoGenerateKey:!1}),_=f.a.create(j,{autoGenerateKey:!1}),R=h.create(A,{autoGenerateKey:!1});return T||_?o.a.createElement(L,n()({},C,{className:k}),T||_,(b||R)&&o.a.createElement(v,null,b,R)):o.a.createElement(L,n()({},C,{className:k}),b,R)}y.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],y.propTypes={},y.Content=v,y.Subheader=h;t.a=y},644:function(e,t,a){"use strict";a.r(t);var r=a(140),n=a(0),c=a.n(n),i=a(646),l=a(371),o=a(653),s=a(373),u=a(257),m=a(190),d=a(31),p=a(18),f=a(139);t.default=Object(p.b)((function(e){return{articles:e.articleListing.myArticles,auth:e.auth}}),{loadMyArticles:f.e,deleteArticle:f.b})((function(e){var t=e.auth,a=e.articles,p=e.loadMyArticles,f=e.deleteArticle,b=Object(n.useState)(null),E=Object(r.a)(b,2),h=E[0],g=E[1],v=Object(n.useState)(!1),y=Object(r.a)(v,2),O=y[0],w=y[1];Object(n.useEffect)((function(){p()}),[t.isAuthenticated]);var j=function(){return w(!1)};return c.a.createElement(m.a,null,c.a.createElement(i.a,{basic:!0,size:"small",open:O,onClose:j},c.a.createElement(l.a,{icon:"archive",content:"Wait wait..."}),c.a.createElement(i.a.Content,null,c.a.createElement("p",null,"You want to delete this story? It will be removed completely here.")),c.a.createElement(i.a.Actions,null,c.a.createElement(o.a,{basic:!0,color:"red",inverted:!0,onClick:j},c.a.createElement(s.a,{name:"remove"})," No"),c.a.createElement(o.a,{color:"green",inverted:!0,onClick:function(){h&&(f(h),j())}},c.a.createElement(s.a,{name:"checkmark"})," Yes"))),c.a.createElement(u.a,null,c.a.createElement("h1",null,"You Stories"),c.a.createElement("div",null,c.a.createElement("div",{style:{display:a&&a.length?"none":""}},"No story found"),c.a.createElement("ul",null,a.map((function(e){return c.a.createElement("li",{key:e._id,style:{display:"flex",padding:"1rem 0",marginBottom:"1rem",borderBottom:"1px solid #ddd"}},c.a.createElement("div",{style:{flex:1}},c.a.createElement("h2",null,c.a.createElement(d.b,{to:"view-story/".concat(e._id)},e.title)),c.a.createElement("div",{className:"minor-color"},e.description),c.a.createElement("div",{className:"minor-color"},"Last edited 5 days ago ")),c.a.createElement("div",null,c.a.createElement(d.b,{className:"link",to:"edit-story/".concat(e._id),style:{marginRight:"1rem"}},"Edit"),c.a.createElement(o.a,{onClick:function(){return t=e._id,w(!0),void g(t);var t}},"Delete")))}))))))}))},95:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(18),i=a(31),l=a(622),o=a(649),s=a(23),u=a(646),m=a(656),d=a(657),p=a(636),f=a(653),b=a(373),E=a(19),h=a(106),g=a(11),v=a(651),y=a(645),O=a(105),w=O.a({email:O.b().email("Invalid email address").required("Required"),password:O.b().min(6,"Must be 6 characters at minimum").max(20,"Must be 20 characters or less").required("Required")}),j=Object(c.b)((function(e){return{auth:e.auth}}),{loginUserWithEmail:s.e})((function(e){var t=Object(h.a)({initialValues:{email:"",password:""},validationSchema:w,onSubmit:function(t){e.loginUserWithEmail(t)}});return e.auth.isAuthenticated?n.a.createElement(g.a,{to:"/"}):n.a.createElement("div",null,n.a.createElement(v.a,{attached:!0,header:"Already signed up?",content:"Login here"}),n.a.createElement(y.a,{className:"attached fluid segment",onSubmit:t.handleSubmit},n.a.createElement(v.a,{negative:!0,style:{display:e.auth.error?"block":"none"}},n.a.createElement("p",null,e.auth.error&&e.auth.error.errorMessage)),n.a.createElement(y.a.Input,Object.assign({name:"email",label:"Email",type:"text",placeholder:"Email"},t.getFieldProps("email"),t.touched.email&&t.errors.email?{error:t.errors.email}:{})),n.a.createElement(y.a.Input,Object.assign({name:"password",label:"Password",type:"password",placeholder:"Password"},t.getFieldProps("password"),t.touched.password&&t.errors.password?{error:t.errors.password}:{})),n.a.createElement(f.a,{type:"submit"},"Submit")))})),N=a(9),S=a.n(N),x=a(15),A=a(2),I=a(24),k=O.a({firstName:O.b().min(2,"Must be 2 characters at minimum").max(30,"Must be 30 characters or less").required("This field is required"),lastName:O.b().min(2,"Must be 2 characters at minimum").max(30,"Must be 30 characters or less").required("This field is required"),email:O.b().email("Invalid email address").required("This field is required"),password:O.b().min(6,"Must be 6 characters at minimum").max(20,"Must be 20 characters or less").required("This field is required")}),C=Object(c.b)((function(e){return{auth:e.auth,register:e.register}}),{registerUser:function(e){return function(){var t=Object(x.a)(S.a.mark((function t(a,r){var n,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:A.REGISTER_WITH_EMAIL_LOADING}),t.prev=1,t.next=4,I.a.post("/register",e);case 4:n=t.sent,a({type:A.REGISTER_WITH_EMAIL_SUCCESS}),a({type:A.LOGIN_WITH_EMAIL_SUCCESS,payload:{token:n.data.token,me:n.data.me}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:A.REGISTER_WITH_EMAIL_FAIL,payload:{error:(null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c?void 0:c.data.message)||t.t0.message}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){var t=Object(h.a)({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:k,onSubmit:function(t){e.registerUser(t)}});return e.auth.isAuthenticated?n.a.createElement(g.a,{to:"/"}):n.a.createElement("div",null,n.a.createElement(v.a,{attached:!0,header:"Welcome to our site!",content:"Fill out the form below to sign-up for a new account"}),n.a.createElement(y.a,{className:"attached fluid segment",onSubmit:t.handleSubmit},n.a.createElement(v.a,{negative:!0,style:{display:e.register.error?"block":"none"}},n.a.createElement("p",null,e.register.error&&e.register.error)),n.a.createElement(y.a.Input,Object.assign({name:"firstName",label:"First name",type:"text",placeholder:"First name"},t.getFieldProps("firstName"),t.touched.firstName&&t.errors.firstName?{error:t.errors.firstName}:{})),n.a.createElement(y.a.Input,Object.assign({name:"lastName",label:"Last name",type:"text",placeholder:"Last name"},t.getFieldProps("lastName"),t.touched.lastName&&t.errors.lastName?{error:t.errors.lastName}:{})),n.a.createElement(y.a.Input,Object.assign({name:"email",label:"Email",type:"email",placeholder:"Email"},t.getFieldProps("email"),t.touched.email&&t.errors.email?{error:t.errors.email}:{})),n.a.createElement(y.a.Input,Object.assign({name:"password",label:"Password",type:"password",placeholder:"Password"},t.getFieldProps("password"),t.touched.password&&t.errors.password?{error:t.errors.password}:{})),n.a.createElement(f.a,{type:"submit"},"Submit")))})),L=(a(112),Object(c.b)((function(e){return{}}),{})((function(e){var t=e.open,a=e.trigger;return n.a.createElement(u.a,{open:t,trigger:a},n.a.createElement(u.a.Header,null,"Welcome"),n.a.createElement(u.a.Content,null,n.a.createElement(m.a,null,n.a.createElement(d.a,{columns:2,stackable:!0},n.a.createElement(p.a,{vertical:!0},"Or"),n.a.createElement(d.a.Row,null,n.a.createElement(d.a.Column,null,n.a.createElement(C,null)),n.a.createElement(d.a.Column,null,n.a.createElement(j,null),n.a.createElement(p.a,{horizontal:!0},"Or Sign in with socials"),n.a.createElement(m.a,null,n.a.createElement(f.a,{color:"facebook",onClick:function(){return window.location.href=E.d}},n.a.createElement(b.a,{name:"facebook"})," Facebook"),n.a.createElement(f.a,{color:"google plus",onClick:function(){return window.location.href=E.e}},n.a.createElement(b.a,{name:"google"})," Google"))))))))}))),T=function(e){var t=e.auth,a=e.logOut,r=e.buttonText;if(!t.isAuthenticated||!t.me)return n.a.createElement(n.a.Fragment,null,n.a.createElement(L,{trigger:n.a.createElement("button",{id:"signInButton"},r)}));var c=n.a.createElement("span",null,n.a.createElement(l.a,{avatar:!0,src:t.me.profileImageUrl})," ",t.me.name);return n.a.createElement(o.a,{trigger:c},n.a.createElement(o.a.Menu,null,n.a.createElement(o.a.Item,{key:"new-story"},n.a.createElement(i.b,{to:"/new-story"},"New story")),n.a.createElement(o.a.Item,{key:"stories"},n.a.createElement(i.b,{to:"/my-stories"},"Stories")),n.a.createElement(o.a.Item,{key:"logout",onClick:function(){return a()}},"Logout")))};T.defaultProps={buttonText:"Sign in/Sign up"};t.a=Object(c.b)((function(e){return{auth:e.auth}}),{logOut:s.d})(T)}}]);
//# sourceMappingURL=MyStories.5a4a80c9.chunk.js.map