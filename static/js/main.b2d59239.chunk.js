(this["webpackJsonpmedium-clone-with-mern"]=this["webpackJsonpmedium-clone-with-mern"]||[]).push([[10],{13:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={publish:"Publish",publishing:"Publishing...",published:"Published",failed:"Publish Failed"}},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return E})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r="http://localhost:5004",a="http://localhost:5004/auth/facebook",E="http://localhost:5004/auth/google",c="dcvhx5qfv",u="sgb4mxbr"},2:function(e,t,n){"use strict";n.r(t),n.d(t,"NEED_AUTHORIZATION",(function(){return r})),n.d(t,"LOGIN_WITH_OAUTH_LOADING",(function(){return a})),n.d(t,"LOGIN_WITH_OAUTH_SUCCESS",(function(){return E})),n.d(t,"LOGIN_WITH_OAUTH_FAIL",(function(){return c})),n.d(t,"LOGOUT_SUCCESS",(function(){return u})),n.d(t,"LOGIN_WITH_EMAIL_LOADING",(function(){return _})),n.d(t,"LOGIN_WITH_EMAIL_SUCCESS",(function(){return o})),n.d(t,"LOGIN_WITH_EMAIL_FAIL",(function(){return i})),n.d(t,"REGISTER_WITH_EMAIL_LOADING",(function(){return S})),n.d(t,"REGISTER_WITH_EMAIL_SUCCESS",(function(){return A})),n.d(t,"REGISTER_WITH_EMAIL_FAIL",(function(){return I})),n.d(t,"ME_LOADING",(function(){return O})),n.d(t,"ME_SUCCESS",(function(){return l})),n.d(t,"ME_FAIL",(function(){return L})),n.d(t,"GET_FEATURE",(function(){return s})),n.d(t,"GET_PROFILE",(function(){return d})),n.d(t,"GET_MESSAGES_LOADING",(function(){return T})),n.d(t,"GET_MESSAGES_SUCCESS",(function(){return C})),n.d(t,"GET_MESSAGES_FAIL",(function(){return f})),n.d(t,"ADD_MESSAGE_LOADING",(function(){return D})),n.d(t,"ADD_MESSAGE_SUCCESS",(function(){return U})),n.d(t,"ADD_MESSAGE_FAIL",(function(){return b})),n.d(t,"DELETE_MESSAGE_LOADING",(function(){return G})),n.d(t,"DELETE_MESSAGE_SUCCESS",(function(){return p})),n.d(t,"DELETE_MESSAGE_FAIL",(function(){return R})),n.d(t,"EDIT_MESSAGE_LOADING",(function(){return h})),n.d(t,"EDIT_MESSAGE_SUCCESS",(function(){return M})),n.d(t,"EDIT_MESSAGE_FAIL",(function(){return N})),n.d(t,"CLEAR_MESSAGE_ERROR",(function(){return m})),n.d(t,"GET_USERS_LOADING",(function(){return j})),n.d(t,"GET_USERS_SUCCESS",(function(){return g})),n.d(t,"GET_USERS_FAIL",(function(){return v})),n.d(t,"GET_PROFILE_LOADING",(function(){return y})),n.d(t,"GET_PROFILE_SUCCESS",(function(){return F})),n.d(t,"GET_PROFILE_FAIL",(function(){return H})),n.d(t,"EDIT_USER_LOADING",(function(){return W})),n.d(t,"EDIT_USER_SUCCESS",(function(){return P})),n.d(t,"EDIT_USER_FAIL",(function(){return k})),n.d(t,"DELETE_USER_LOADING",(function(){return w})),n.d(t,"DELETE_USER_SUCCESS",(function(){return x})),n.d(t,"DELETE_USER_FAIL",(function(){return B})),n.d(t,"RESEED_DATABASE_LOADING",(function(){return z})),n.d(t,"RESEED_DATABASE_SUCCESS",(function(){return Z})),n.d(t,"RESEED_DATABASE_FAIL",(function(){return J})),n.d(t,"LOAD_ARTICLES",(function(){return Y})),n.d(t,"RESET_ARTICLES",(function(){return V})),n.d(t,"LOAD_MORE_ARTICLES",(function(){return X})),n.d(t,"LOAD_MY_ARTICLES",(function(){return q})),n.d(t,"LOAD_ARTICLES_POPULAR",(function(){return $})),n.d(t,"LOAD_ARTICLE_DETAILS_SUCCESS",(function(){return K})),n.d(t,"DELETE_ARTICLE_SUCCESS",(function(){return Q})),n.d(t,"ARTICLE_CLAP_SUCCESS",(function(){return ee})),n.d(t,"RESET_STATE_FOR_NEW_ARTICLE",(function(){return te})),n.d(t,"RESET_PUBLISH_STATUS",(function(){return ne})),n.d(t,"EDIT_ARTICLE",(function(){return re})),n.d(t,"ADD_NEW_ARTICLE_LOADING",(function(){return ae})),n.d(t,"ADD_NEW_ARTICLE_SUCCESS",(function(){return Ee})),n.d(t,"ADD_NEW_ARTICLE_FAIL",(function(){return ce})),n.d(t,"UPLOAD_FEATURE_IMAGE_SUCCESS",(function(){return ue})),n.d(t,"UPLOAD_FEATURE_IMAGE_LOADING",(function(){return _e})),n.d(t,"CANNOT_PUBLISH_WHILE_UPLOADING_IMAGE",(function(){return oe})),n.d(t,"ADD_COMMENT",(function(){return ie})),n.d(t,"ADD_COMMENT_SUCCESS",(function(){return Se})),n.d(t,"COMPOSING_COMMENT",(function(){return Ae})),n.d(t,"LOAD_COMMENTS",(function(){return Ie})),n.d(t,"LOAD_COMMENTS_SUCCESS",(function(){return Oe}));var r="NEED_AUTHORIZATION",a="LOGIN_WITH_OAUTH_LOADING",E="LOGIN_WITH_OAUTH_SUCCESS",c="LOGIN_WITH_OAUTH_FAIL",u="LOGOUT_SUCCESS",_="LOGIN_WITH_EMAIL_LOADING",o="LOGIN_WITH_EMAIL_SUCCESS",i="LOGIN_WITH_EMAIL_FAIL",S="REGISTER_WITH_EMAIL_LOADING",A="REGISTER_WITH_EMAIL_SUCCESS",I="REGISTER_WITH_EMAIL_FAIL",O="ME_LOADING",l="ME_SUCCESS",L="ME_FAIL",s="GET_FEATURE",d="GET_PROFILE",T="GET_MESSAGES_LOADING",C="GET_MESSAGES_SUCCESS",f="GET_MESSAGES_FAIL",D="ADD_MESSAGE_LOADING",U="ADD_MESSAGE_SUCCESS",b="ADD_MESSAGE_FAIL",G="DELETE_MESSAGE_LOADING",p="DELETE_MESSAGE_SUCCESS",R="DELETE_MESSAGE_FAIL",h="EDIT_MESSAGE_LOADING",M="EDIT_MESSAGE_SUCCESS",N="EDIT_MESSAGE_FAIL",m="CLEAR_MESSAGE_ERROR",j="GET_USERS_LOADING",g="GET_USERS_SUCCESS",v="GET_USERS_FAIL",y="GET_PROFILE_LOADING",F="GET_PROFILE_SUCCESS",H="GET_PROFILE_FAIL",W="EDIT_USER_LOADING",P="EDIT_USER_SUCCESS",k="EDIT_USER_FAIL",w="DELETE_USER_LOADING",x="DELETE_USER_SUCCESS",B="DELETE_USER_FAIL",z="RESEED_DATABASE_LOADING",Z="RESEED_DATABASE_SUCCESS",J="RESEED_DATABASE_FAIL",Y="LOAD_ARTICLES",V="RESET_ARTICLES",X="LOAD_MORE_ARTICLES",q="LOAD_MY_ARTICLES",$="LOAD_ARTICLES_POPULAR",K="LOAD_ARTICLE_DETAILS_SUCCESS",Q="DELETE_ARTICLE_SUCCESS",ee="ARTICLE_CLAP_SUCCESS",te="RESET_STATE_FOR_NEW_ARTICLE",ne="RESET_PUBLISH_STATUS",re="EDIT_ARTICLE",ae="ADD_NEW_ARTICLE_LOADING",Ee="ADD_NEW_ARTICLE_SUCCESS",ce="ADD_NEW_ARTICLE_FAIL",ue="UPLOAD_FEATURE_IMAGE_SUCCESS",_e="UPLOAD_FEATURE_IMAGE_LOADING",oe="CANNOT_PUBLISH_WHILE_UPLOADING_IMAGE",ie="ADD_COMMENT",Se="ADD_COMMENT_SUCCESS",Ae="COMPOSING_COMMENT",Ie="LOAD_COMMENTS",Oe="LOAD_COMMENTS_SUCCESS"},23:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return A})),n.d(t,"d",(function(){return I})),n.d(t,"f",(function(){return O}));var r=n(9),a=n.n(r),E=n(15),c=n(24),u=n(25),_=n(2),o=function(e){return function(){var t=Object(E.a)(a.a.mark((function t(n,r){var E;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:_.LOGIN_WITH_EMAIL_LOADING}),t.prev=1,t.next=4,c.a.post("/login",e);case 4:E=t.sent,n({type:_.LOGIN_WITH_EMAIL_SUCCESS,payload:{token:E.data.token,me:E.data.me}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:_.LOGIN_WITH_EMAIL_FAIL,payload:{errorMessage:t.t0.response.data.message}});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()},i=function(e){return function(){var t=Object(E.a)(a.a.mark((function t(n,r){var E,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:_.LOGIN_WITH_OAUTH_LOADING}),t.prev=1,E={"Content-Type":"application/json","x-auth-token":e},t.next=5,u.a.get("/users/me",{headers:E});case 5:c=t.sent,n({type:_.LOGIN_WITH_OAUTH_SUCCESS,payload:{me:c.data.me,token:e}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:_.LOGIN_WITH_OAUTH_FAIL,payload:{error:t.t0.response.data.message}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},S=function(){return function(){var e=Object(E.a)(a.a.mark((function e(t,n){var r,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:_.ME_LOADING}),e.prev=1,r=A(n),e.next=5,u.a.get("/users/me",r);case 5:E=e.sent,t({type:_.ME_SUCCESS,payload:{me:E.data.me}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:_.ME_FAIL,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},A=function(e){var t=e().auth.token,n={headers:{"Content-Type":"application/json"}};return t&&(n.headers["x-auth-token"]=t),n},I=function(e){return function(){var t=Object(E.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(),t.next=4,c.a.get("/logout");case 4:n({type:_.LOGOUT_SUCCESS}),e&&e.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return{type:_.NEED_AUTHORIZATION,payload:e}};function l(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t],r=n.indexOf("="),a=r>-1?n.substr(0,r):n;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}},24:function(e,t,n){"use strict";var r=n(22),a=n.n(r),E=n(19);t.a=a.a.create({baseURL:E.a+"/auth"})},25:function(e,t,n){"use strict";var r=n(22),a=n.n(r),E=n(19);t.a=a.a.create({baseURL:E.a+"/api"})},48:function(e,t,n){e.exports=n(77)},54:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),E=n(20),c=n.n(E),u=(n(53),n(54),n(27)),_=n.n(u),o=n(18),i=n(31),S=n(11),A=n(23),I=(n(75),Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4)]).then(n.bind(null,652))}))),O=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(14),n.e(6)]).then(n.bind(null,650))})),l=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(8)]).then(n.bind(null,639))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(13),n.e(9)]).then(n.bind(null,655))})),s=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(5)]).then(n.bind(null,643))})),d=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,644))})),T=Object(o.b)((function(e){return{auth:e.auth}}),{logInUserWithOauth:A.c,loadMe:A.b})((function(e){var t=e.logInUserWithOauth,n=e.auth,E=e.loadMe;return Object(r.useEffect)((function(){"#_=_"===window.location.hash&&(window.location.hash="");var e=_.a.get("x-auth-cookie");e&&(_.a.remove("x-auth-cookie"),t(e))}),[t]),Object(r.useEffect)((function(){!n.isAuthenticated&&n.token&&E()}),[n.isAuthenticated,n.token,E]),a.a.createElement("div",null,a.a.createElement(i.a,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement("div",null,a.a.createElement(S.b,{path:"/",component:O,exact:!0}),a.a.createElement(S.b,{path:"/my-stories/",component:d,exact:!0}),a.a.createElement(S.b,{path:"/new-story",component:l,exact:!0}),a.a.createElement(S.b,{path:"/view-story/:_id",component:L,exact:!0}),a.a.createElement(S.b,{path:"/edit-story/:_id",component:s,exact:!0}),a.a.createElement(S.b,{path:"/view-story/:_id/comments",component:I,exact:!0})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=n(10),f=n(45),D=n(12),U=n(1),b=n(2),G={articles:[],noMore:!1,popularArticles:[],myArticles:[]};function p(e,t){var n=Object(D.a)(e),r=n.filter((function(e){return e._id===t._id}));return r.length?(r[0].clap=t.clap,n):null}var R=n(13),h={featureImageIsUploading:!1,isErrorPublishingWhileUploadImage:!1,featureImageUrl:"",publishStatus:Object.keys(R.a)[0],articleId:"",editingArticle:null},M={articleDetails:null},N={loading:!1,article:null,composingComment:!1},m={isLoading:!1,error:null},j=n(2),g={token:localStorage.getItem("token"),isAuthenticated:!1,currentPageNeedAuthorization:!1,me:null,appLoaded:!1,isLoading:!1,error:null},v=Object(C.c)({articleListing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b.LOAD_ARTICLES:return Object(U.a)(Object(U.a)({},e),{},{articles:r,noMore:!r||!r.length});case b.LOAD_MORE_ARTICLES:return Object(U.a)(Object(U.a)({},e),{},{articles:[].concat(Object(D.a)(e.articles),Object(D.a)(r)),noMore:!r||!r.length});case b.RESET_ARTICLES:return Object(U.a)(Object(U.a)({},e),{},{articles:[],noMore:!1});case b.LOAD_ARTICLES_POPULAR:return Object(U.a)(Object(U.a)({},e),{},{popularArticles:r});case b.LOAD_MY_ARTICLES:return Object(U.a)(Object(U.a)({},e),{},{myArticles:r});case b.ARTICLE_CLAP_SUCCESS:var a=p(e.articles,r),E=p(e.articles,r);return a?Object(U.a)(Object(U.a)({},e),{},{articles:a,popularArticles:E}):e;case b.DELETE_ARTICLE_SUCCESS:var c=e.myArticles.filter((function(e){return e._id===r}));if(!c.length)return e;var u=e.myArticles.indexOf(c[0]);return console.log("index",u,r),Object(U.a)(Object(U.a)({},e),{},{myArticles:[].concat(Object(D.a)(e.myArticles.slice(0,u)),Object(D.a)(e.myArticles.slice(u+1)))});case b.LOGOUT_SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{myArticles:[]});default:return e}},articleEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b.RESET_STATE_FOR_NEW_ARTICLE:return h;case b.UPLOAD_FEATURE_IMAGE_LOADING:return Object(U.a)(Object(U.a)({},e),{},{featureImageIsUploading:!0,featureImageUrl:""});case b.UPLOAD_FEATURE_IMAGE_SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{featureImageUrl:r,featureImageIsUploading:!1,publishStatus:Object.keys(R.a)[0]});case b.CANNOT_PUBLISH_WHILE_UPLOADING_IMAGE:return Object(U.a)(Object(U.a)({},e),{},{isErrorPublishingWhileUploadImage:!0});case b.RESET_PUBLISH_STATUS:return Object(U.a)(Object(U.a)({},e),{},{publishStatus:Object.keys(R.a)[0]});case b.EDIT_ARTICLE:return Object(U.a)(Object(U.a)({},e),{},{articleId:r._id,featureImageUrl:r.featureImage,editingArticle:r});case b.ADD_NEW_ARTICLE_LOADING:return Object(U.a)(Object(U.a)({},e),{},{publishStatus:Object.keys(R.a)[1]});case b.ADD_NEW_ARTICLE_SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{articleId:r._id,publishStatus:Object.keys(R.a)[2]});case b.ADD_NEW_ARTICLE_FAIL:return Object(U.a)(Object(U.a)({},e),{},{publishStatus:Object.keys(R.a)[3]});default:return e}},articleViewer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b.LOAD_ARTICLE_DETAILS_SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{articleDetails:r});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b.COMPOSING_COMMENT:return Object(U.a)(Object(U.a)({},e),{},{composingComment:!0});case b.LOAD_COMMENTS:case b.ADD_COMMENT:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case b.LOAD_COMMENTS_SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,article:r.article});case b.ADD_COMMENT_SUCCESS:var a=[r].concat(Object(D.a)(e.article.comments));return Object(U.a)(Object(U.a)({},e),{},{loading:!1,composingComment:!1,article:Object(U.a)(Object(U.a)({},e.article),{},{comments:a,noOfComments:a.length})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.NEED_AUTHORIZATION:return Object(U.a)(Object(U.a)({},e),{},{currentPageNeedAuthorization:r});case j.ME_LOADING:return Object(U.a)(Object(U.a)({},e),{},{isLoading:!0,appLoaded:!1,error:null});case j.ME_SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{isAuthenticated:!0,isLoading:!1,me:r.me,error:null,appLoaded:!0});case j.ME_FAIL:return localStorage.removeItem("token"),Object(U.a)(Object(U.a)({},e),{},{isAuthenticated:!1,isLoading:!1,me:null,error:null,appLoaded:!0});case j.LOGIN_WITH_EMAIL_LOADING:return Object(U.a)(Object(U.a)({},e),{},{isLoading:!0});case j.LOGIN_WITH_EMAIL_SUCCESS:case j.LOGIN_WITH_OAUTH_SUCCESS:return localStorage.setItem("token",r.token),Object(U.a)(Object(U.a)({},e),{},{isAuthenticated:!0,isLoading:!1,token:r.token,me:r.me,error:null,appLoaded:!0});case j.LOGIN_WITH_EMAIL_FAIL:return Object(U.a)(Object(U.a)({},e),{},{error:r});case j.LOGOUT_SUCCESS:return localStorage.removeItem("token"),Object(U.a)(Object(U.a)({},e),{},{isAuthenticated:!1,isLoading:!1,token:null,me:null,error:null,appLoaded:!1});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b.REGISTER_WITH_EMAIL_LOADING:return Object(U.a)(Object(U.a)({},e),{},{isLoading:!0});case b.REGISTER_WITH_EMAIL_SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{isLoading:!1,error:null});case b.REGISTER_WITH_EMAIL_FAIL:return Object(U.a)(Object(U.a)({},e),{},{isLoading:!1,error:r.error});default:return e}}}),y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.d;c.a.render(a.a.createElement(o.a,{store:Object(C.e)(v,y(Object(C.a)(f.a)))},a.a.createElement(a.a.StrictMode,null,a.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,11,12]]]);
//# sourceMappingURL=main.b2d59239.chunk.js.map