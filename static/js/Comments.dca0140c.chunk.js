(this["webpackJsonpmedium-clone-with-mern"]=this["webpackJsonpmedium-clone-with-mern"]||[]).push([[4],{108:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(31),c=a(654),i=a(622),l=a(109),s=a.n(l),u=a(95);a(114);t.a=function(){return r.a.createElement("div",{className:"header-wrapper"},r.a.createElement("div",{className:"ui container"},r.a.createElement(c.a,{secondary:!0,className:"site-header"},r.a.createElement(c.a.Item,{name:"logo",className:"logo",as:o.b,to:"/"},r.a.createElement(i.a,{src:s.a,alt:"Logo"})),r.a.createElement(c.a.Item,{name:"topStories"},r.a.createElement(o.b,{to:"/"},"Top Stories")),r.a.createElement(c.a.Menu,{position:"right",className:"sign-in"},r.a.createElement(c.a.Item,{name:"signin"},r.a.createElement(u.a,null))))))}},109:function(e,t,a){e.exports=a.p+"static/media/stories-logo.a38b51bf.svg"},112:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},143:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(18),c=a(108);a(115);t.a=Object(o.b)((function(e){return{auth:e.auth}}),{})((function(e){e.auth;var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,null),r.a.createElement("div",{className:"page-content"},t))}))},254:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),o=a(31),c=a(371),i=a(622);function l(e){var t=e.authorId,a=e.authorName,n=e.authorImageUrl,l=e.createdAt;return r.a.createElement("div",null,r.a.createElement(c.a,{size:"small"},r.a.createElement(i.a,{circular:!0,src:n}),r.a.createElement(c.a.Content,null,r.a.createElement(o.b,{to:"authors/".concat(t)},a),r.a.createElement(c.a.Subheader,null,l))))}},255:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return n}))},256:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}a.d(t,"a",(function(){return r}))},263:function(e,t,a){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return function(){var t,a=n(e);if(r()){var o=n(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return c(this,t)}}a.d(t,"a",(function(){return i}))},265:function(e,t,a){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}a.d(t,"a",(function(){return r}))},362:function(e,t){},363:function(e,t){},599:function(e,t,a){},652:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(143),c=a(371),i=a(636),l=a(656),s=a(18),u=a(352),m=a.n(u),d=a(254),p=a(31),f=a(370),h=a(373),E=(a(599),function(e){var t=e.article;return r.a.createElement(l.a,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",null,r.a.createElement(p.b,{to:"/view-story/".concat(t._id)},t.title),r.a.createElement("div",null,t.author.name)),r.a.createElement("div",{style:{flex:1}}),r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(h.a,{name:"hand peace"}),t.clap),r.a.createElement(f.a,null,r.a.createElement(h.a,{name:"comment"}),t.noOfComments))))}),b=a(9),g=a.n(b),y=a(15),v=a(25),w=a(2),O=a(23),C=a(11),S=a(255),I=a(256),N=a(265),j=a(263),x=a(651),_=a(622),k=a(653),M=a(367),T=a.n(M),A=(a(368),a(95)),P=function(e){Object(N.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).publishComment=function(e){e.preventDefault(),n.props.addComment(n.props.article._id,n.props.auth.me.id,n.editor.getContent())},n.editor=null,n}return Object(I.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.editor=new T.a(".editor",{placeholder:{text:"Write a response..."}}),this.editor.subscribe("editableInput",(function(){e.editor.getContent()&&e.props.setComposingComment()}))}},{key:"componentWillUnmount",value:function(){this.editor&&this.editor.unsubscribe("editableInput")}},{key:"componentDidUpdate",value:function(e,t){this.props.auth.isAuthenticated&&!this.props.composingComment&&this.editor.resetContent()}},{key:"render",value:function(){var e,t=this.props,a=t.auth,n=t.composingComment;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{className:a.isAuthenticated?"hidden":""},r.a.createElement(A.a,{buttonText:"You need to sign in to comment"})),r.a.createElement("div",{className:a.isAuthenticated?"":"hidden"},r.a.createElement(l.a,{padded:"very",style:{display:"flex"}},r.a.createElement(_.a,{circular:!0,src:null===(e=a.me)||void 0===e?void 0:e.profileImageUrl,style:{width:"40px",height:"40px"}}),r.a.createElement("div",{style:{marginLeft:"15px"}},r.a.createElement("textarea",{className:"editor"}),r.a.createElement("div",{style:{marginTop:"10px",display:"".concat(n?"block":"none")}},r.a.createElement(k.a,{primary:!0,onClick:this.publishComment},"Publish"),r.a.createElement(k.a,null,"Cancel"))))))}}]),a}(r.a.Component),L=Object(s.b)((function(e){return{auth:e.auth,composingComment:e.comments.composingComment}}),{addComment:function(e,t,a){return function(){var n=Object(y.a)(g.a.mark((function n(r,o){var c,i,l;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:w.ADD_COMMENT}),c=Object(O.a)(o),i={author:t,content:a},n.next=5,v.a.post("/articles/".concat(e,"/comments"),i,c);case 5:l=n.sent,r({type:w.ADD_COMMENT_SUCCESS,payload:l.data});case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},setComposingComment:function(e){return{type:w.COMPOSING_COMMENT}}})(P);t.default=Object(s.b)((function(e){return{auth:e.auth,article:e.comments.article}}),{loadComments:function(e){return function(){var t=Object(y.a)(g.a.mark((function t(a,n){var r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:w.LOAD_COMMENTS}),r=Object(O.a)(n),t.next=4,v.a.get("/articles/".concat(e,"/comments"),r);case 4:o=t.sent,a({type:w.LOAD_COMMENTS_SUCCESS,payload:o.data});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){e.auth;var t=e.article,a=e.loadComments,s=Object(C.f)()._id;return Object(n.useEffect)((function(){a(s)}),[s,a]),s&&t?r.a.createElement(o.a,null,r.a.createElement("div",{style:{padding:"20px 0",backgroundColor:"#eee"}},r.a.createElement("div",{className:"narrow-page-content"},r.a.createElement(c.a,{as:"h5"},"Showing responses for:"),r.a.createElement(E,{article:t}))),r.a.createElement("div",null,r.a.createElement("div",{className:"narrow-page-content"},r.a.createElement(c.a,{as:"h5"},"Responses"),r.a.createElement(L,{article:t}),r.a.createElement(i.a,null),r.a.createElement("div",null,t.comments.map((function(e){return r.a.createElement(l.a,{key:e._id},r.a.createElement(d.a,{authorId:e.author.id,authorName:e.author.name,authorImageUrl:e.author.profileImageUrl,createdAt:e.createdAt}),r.a.createElement("div",{style:{padding:"20px 0"}},m()(e.content)))})))))):r.a.createElement("div",null,"Loading...")}))},95:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(18),c=a(31),i=a(622),l=a(649),s=a(23),u=a(646),m=a(656),d=a(657),p=a(636),f=a(653),h=a(373),E=a(19),b=a(106),g=a(11),y=a(651),v=a(645),w=a(105),O=w.a({email:w.b().email("Invalid email address").required("Required"),password:w.b().min(6,"Must be 6 characters at minimum").max(20,"Must be 20 characters or less").required("Required")}),C=Object(o.b)((function(e){return{auth:e.auth}}),{loginUserWithEmail:s.e})((function(e){var t=Object(b.a)({initialValues:{email:"",password:""},validationSchema:O,onSubmit:function(t){e.loginUserWithEmail(t)}});return e.auth.isAuthenticated?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(y.a,{attached:!0,header:"Already signed up?",content:"Login here"}),r.a.createElement(v.a,{className:"attached fluid segment",onSubmit:t.handleSubmit},r.a.createElement(y.a,{negative:!0,style:{display:e.auth.error?"block":"none"}},r.a.createElement("p",null,e.auth.error&&e.auth.error.errorMessage)),r.a.createElement(v.a.Input,Object.assign({name:"email",label:"Email",type:"text",placeholder:"Email"},t.getFieldProps("email"),t.touched.email&&t.errors.email?{error:t.errors.email}:{})),r.a.createElement(v.a.Input,Object.assign({name:"password",label:"Password",type:"password",placeholder:"Password"},t.getFieldProps("password"),t.touched.password&&t.errors.password?{error:t.errors.password}:{})),r.a.createElement(f.a,{type:"submit"},"Submit")))})),S=a(9),I=a.n(S),N=a(15),j=a(2),x=a(24),_=w.a({firstName:w.b().min(2,"Must be 2 characters at minimum").max(30,"Must be 30 characters or less").required("This field is required"),lastName:w.b().min(2,"Must be 2 characters at minimum").max(30,"Must be 30 characters or less").required("This field is required"),email:w.b().email("Invalid email address").required("This field is required"),password:w.b().min(6,"Must be 6 characters at minimum").max(20,"Must be 20 characters or less").required("This field is required")}),k=Object(o.b)((function(e){return{auth:e.auth,register:e.register}}),{registerUser:function(e){return function(){var t=Object(N.a)(I.a.mark((function t(a,n){var r,o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:j.REGISTER_WITH_EMAIL_LOADING}),t.prev=1,t.next=4,x.a.post("/register",e);case 4:r=t.sent,a({type:j.REGISTER_WITH_EMAIL_SUCCESS}),a({type:j.LOGIN_WITH_EMAIL_SUCCESS,payload:{token:r.data.token,me:r.data.me}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:j.REGISTER_WITH_EMAIL_FAIL,payload:{error:(null===t.t0||void 0===t.t0||null===(o=t.t0.response)||void 0===o?void 0:o.data.message)||t.t0.message}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){var t=Object(b.a)({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:_,onSubmit:function(t){e.registerUser(t)}});return e.auth.isAuthenticated?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(y.a,{attached:!0,header:"Welcome to our site!",content:"Fill out the form below to sign-up for a new account"}),r.a.createElement(v.a,{className:"attached fluid segment",onSubmit:t.handleSubmit},r.a.createElement(y.a,{negative:!0,style:{display:e.register.error?"block":"none"}},r.a.createElement("p",null,e.register.error&&e.register.error)),r.a.createElement(v.a.Input,Object.assign({name:"firstName",label:"First name",type:"text",placeholder:"First name"},t.getFieldProps("firstName"),t.touched.firstName&&t.errors.firstName?{error:t.errors.firstName}:{})),r.a.createElement(v.a.Input,Object.assign({name:"lastName",label:"Last name",type:"text",placeholder:"Last name"},t.getFieldProps("lastName"),t.touched.lastName&&t.errors.lastName?{error:t.errors.lastName}:{})),r.a.createElement(v.a.Input,Object.assign({name:"email",label:"Email",type:"email",placeholder:"Email"},t.getFieldProps("email"),t.touched.email&&t.errors.email?{error:t.errors.email}:{})),r.a.createElement(v.a.Input,Object.assign({name:"password",label:"Password",type:"password",placeholder:"Password"},t.getFieldProps("password"),t.touched.password&&t.errors.password?{error:t.errors.password}:{})),r.a.createElement(f.a,{type:"submit"},"Submit")))})),M=(a(112),Object(o.b)((function(e){return{}}),{})((function(e){var t=e.open,a=e.trigger;return r.a.createElement(u.a,{open:t,trigger:a},r.a.createElement(u.a.Header,null,"Welcome"),r.a.createElement(u.a.Content,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{columns:2,stackable:!0},r.a.createElement(p.a,{vertical:!0},"Or"),r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Column,null,r.a.createElement(k,null)),r.a.createElement(d.a.Column,null,r.a.createElement(C,null),r.a.createElement(p.a,{horizontal:!0},"Or Sign in with socials"),r.a.createElement(m.a,null,r.a.createElement(f.a,{color:"facebook",onClick:function(){return window.location.href=E.d}},r.a.createElement(h.a,{name:"facebook"})," Facebook"),r.a.createElement(f.a,{color:"google plus",onClick:function(){return window.location.href=E.e}},r.a.createElement(h.a,{name:"google"})," Google"))))))))}))),T=function(e){var t=e.auth,a=e.logOut,n=e.buttonText;if(!t.isAuthenticated||!t.me)return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{trigger:r.a.createElement("button",{id:"signInButton"},n)}));var o=r.a.createElement("span",null,r.a.createElement(i.a,{avatar:!0,src:t.me.profileImageUrl})," ",t.me.name);return r.a.createElement(l.a,{trigger:o},r.a.createElement(l.a.Menu,null,r.a.createElement(l.a.Item,{key:"new-story"},r.a.createElement(c.b,{to:"/new-story"},"New story")),r.a.createElement(l.a.Item,{key:"stories"},r.a.createElement(c.b,{to:"/my-stories"},"Stories")),r.a.createElement(l.a.Item,{key:"logout",onClick:function(){return a()}},"Logout")))};T.defaultProps={buttonText:"Sign in/Sign up"};t.a=Object(o.b)((function(e){return{auth:e.auth}}),{logOut:s.d})(T)}}]);
//# sourceMappingURL=Comments.dca0140c.chunk.js.map