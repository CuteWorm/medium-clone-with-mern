(this["webpackJsonpmedium-clone-with-mern"]=this["webpackJsonpmedium-clone-with-mern"]||[]).push([[3],{108:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(31),l=a(654),c=a(622),s=a(109),o=a.n(s),u=a(95);a(114);t.a=function(){return n.a.createElement("div",{className:"header-wrapper"},n.a.createElement("div",{className:"ui container"},n.a.createElement(l.a,{secondary:!0,className:"site-header"},n.a.createElement(l.a.Item,{name:"logo",className:"logo",as:i.b,to:"/"},n.a.createElement(c.a,{src:o.a,alt:"Logo"})),n.a.createElement(l.a.Item,{name:"topStories"},n.a.createElement(i.b,{to:"/"},"Top Stories")),n.a.createElement(l.a.Menu,{position:"right",className:"sign-in"},n.a.createElement(l.a.Item,{name:"signin"},n.a.createElement(u.a,null))))))}},109:function(e,t,a){e.exports=a.p+"static/media/stories-logo.a38b51bf.svg"},112:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},140:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(33);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,n=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},190:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(108),l=(a(115),a(651)),c=a(95),s=a(31),o=a(18),u=a(23);t.a=Object(o.b)((function(e){return{auth:e.auth}}),{requireAuthorization:u.f})((function(e){var t=e.auth,a=e.children,o=e.requireAuthorization;return Object(r.useEffect)((function(){return o(!0),function(){o(!1)}}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:!t.isAuthenticated&&t.currentPageNeedAuthorization?"":"hidden"},n.a.createElement("div",{className:"app-overlay",style:{position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:1}},n.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},n.a.createElement(l.a,{padding:"big",style:{padding:"50px 50px 65px",textAlign:"center"}},n.a.createElement(l.a.Header,{style:{marginBottom:"20px"}},"You need to sign in to access this page"),n.a.createElement(c.a,null),n.a.createElement("div",{style:{marginTop:"2rem"}},"Or back to ",n.a.createElement(s.b,{className:"link",to:"/"},"Home page")))))),n.a.createElement(i.a,null),n.a.createElement("div",{className:"page-content"},a))}))},257:function(e,t,a){"use strict";var r=a(79),n=a.n(r),i=a(80),l=a.n(i),c=(a(14),a(0)),s=a.n(c),o=a(116),u=a(292),m=a(293),d=a(78);function p(e){var t=e.children,a=e.className,r=e.content,i=e.fluid,c=e.text,f=e.textAlign,b=l()("ui",Object(o.a)(c,"text"),Object(o.a)(i,"fluid"),Object(o.d)(f),"container",a),h=Object(u.a)(p,e),E=Object(m.a)(p,e);return s.a.createElement(E,n()({},h,{className:b}),d.a.isNil(t)?r:t)}p.handledProps=["as","children","className","content","fluid","text","textAlign"],p.propTypes={},t.a=p},369:function(e,t,a){"use strict";var r=a(140),n=a(367),i=a.n(n),l=a(0),c=a.n(l),s=a(18),o=a(373),u=a(623),m=a(656),d=a(9),p=a.n(d),f=a(15),b=a(25),h=a(22),E=a.n(h),g=a(19),y=E.a.create({baseURL:"https://api.cloudinary.com/v1_1/".concat(g.b)}),v=a(2),O=a(23),I=a(651);a(608);function N(e){var t,a=e.dummy,n=e.header,i=e.message,s=e.delay,o=Object(l.useState)(!1),u=Object(r.a)(o,2),m=u[0],d=u[1];function p(){return s.duration+s.in+s.out}return Object(l.useEffect)((function(){a&&!m&&(d(!0),setTimeout((function(){d(!1)}),p()))}),[a]),c.a.createElement(I.a,{negative:!0,className:"flash-message ".concat(m?"show":""),style:{animationDuration:(t=p(),t/1e3+"s")}},n?c.a.createElement(I.a.Header,null,n):"",c.a.createElement("p",null,i))}N.defaultProps={delay:{in:500,duration:4e3,out:500}};a(368),a(609);var w=a(654),j=a(653),S=a(13);function A(e){var t=e.publish,a=e.publishStatus,r=[Object.keys(S.a)[2],Object.keys(S.a)[3]];return c.a.createElement("div",null,c.a.createElement(w.a,{secondary:!0},c.a.createElement(w.a.Menu,{position:"right"},c.a.createElement(j.a,Object.assign({basic:!0,color:"green"},r.indexOf(a)>-1?{disabled:!0}:{},{className:a,content:S.a[a],onClick:function(){t()}})))))}t.a=Object(s.b)((function(e){var t;return{articleId:e.articleEditor.articleId,authorId:null===(t=e.auth.me)||void 0===t?void 0:t.id,featureImageUrl:e.articleEditor.featureImageUrl,featureImageIsUploading:e.articleEditor.featureImageIsUploading,publishStatus:e.articleEditor.publishStatus,editingArticle:e.articleEditor.editingArticle}}),{resetStateForNewArticle:function(){return{type:v.RESET_STATE_FOR_NEW_ARTICLE}},loadArticleForEditing:function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,r){var n,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(O.a)(r),t.next=3,b.a.get("/articles/"+e,n);case 3:(i=t.sent).data&&a({type:v.EDIT_ARTICLE,payload:i.data});case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},publishArticle:function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,r){var n,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r().articleEditor.featureImageIsUploading){t.next=3;break}return a({type:v.CANNOT_PUBLISH_WHILE_UPLOADING_IMAGE}),t.abrupt("return");case 3:if(a({type:v.ADD_NEW_ARTICLE_LOADING}),t.prev=4,n=Object(O.a)(r),!e._id){t.next=12;break}return t.next=9,b.a.put("/articles",e,n);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,b.a.post("/articles",e,n);case 14:t.t0=t.sent;case 15:i=t.t0,a({type:v.ADD_NEW_ARTICLE_SUCCESS,payload:i.data}),t.next=22;break;case 19:t.prev=19,t.t1=t.catch(4),a({type:v.ADD_NEW_ARTICLE_FAIL});case 22:case"end":return t.stop()}}),t,null,[[4,19]])})));return function(e,a){return t.apply(this,arguments)}}()},uploadFeatureImage:function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:v.UPLOAD_FEATURE_IMAGE_LOADING}),(r=new FormData).append("file",e),r.append("multiple",!0),r.append("upload_preset",g.c),t.next=7,y.post("/upload",r);case 7:n=t.sent,a({type:v.UPLOAD_FEATURE_IMAGE_SUCCESS,payload:n.data.secure_url});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},resetPublishStatue:function(){return function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:v.RESET_PUBLISH_STATUS});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.resetStateForNewArticle,a=e.loadArticleForEditing,n=e.publishArticle,s=e.uploadFeatureImage,d=e.resetPublishStatue,p=e.editingArticleId,f=e.editingArticle,b=e.articleId,h=e.authorId,E=e.featureImageIsUploading,g=e.featureImageUrl,y=e.publishStatus,v=Object(l.useRef)(),O=Object(l.useRef)(),I=Object(l.useState)(""),w=Object(r.a)(I,2),j=w[0],S=w[1],T=Object(l.useState)(""),x=Object(r.a)(T,2),_=x[0],k=x[1],C=Object(l.useState)(null),L=Object(r.a)(C,2),P=L[0],U=L[1];return Object(l.useEffect)((function(){O.current=new i.a(".app-editor",{autoLink:!0,delay:1e3,targetBlank:!0,anchor:{placeholderText:"Type a link",customClassOption:"btn",customClassOptionText:"Create Button"},paste:{cleanPastedHTML:!0,cleanAttrs:["style","dir"],cleanTags:["label","meta"],unwrapTags:["sub","sup"]},anchorPreview:{hideDelay:300},placeholder:{text:"Tell your story..."}});var e=function(){d(),S(O.current.getContent(0))};return O.current.subscribe("editableInput",e),function(){O.current.unsubscribe("editableInput",e)}}),[]),Object(l.useEffect)((function(){p&&p.length?a(p):t()}),[p]),Object(l.useEffect)((function(){if(f){k(f.title),S(f.content),O.current.setContent(f.content,0),function(){var e=document.getElementsByClassName("app-editor")[0];O.current.selectElement(e),i.a.selection.moveCursor(document,e)}()}}),[f]),c.a.createElement("div",{className:"editor-section"},c.a.createElement(A,{publish:function(){E?U({dummy:Math.random(),header:"Oops!",message:"Please wait until uploading image finishes"}):_?n({_id:b,title:_,content:j,authorId:h,featureImage:g}):U({dummy:Math.random(),header:"Oops!",message:"Did you mean to write something so short? Please write more and try publishing again."})},publishStatus:y}),c.a.createElement("textarea",{className:"editor-title",id:"editor-title",placeholder:"Title",value:_,onChange:function(e){d(),k(e.target.value)}}),c.a.createElement("span",{className:"picture-upload",title:"Upload a feature image",onClick:function(){return v.current.click()}},c.a.createElement(o.a,{name:"camera",size:"big"}),c.a.createElement("div",{className:"hidden"},c.a.createElement("input",{type:"file",onChange:function(){return function(){if(v.current.files.length){var e=v.current.files[0],t=new FileReader;t.onload=function(t){document.getElementById("image-preview").src=t.target.result,s(e)},t.readAsDataURL(e)}}()},id:"file",ref:v}))),c.a.createElement("div",null,c.a.createElement(u.a,{style:{height:150,width:150,display:E?"block":"none"}},c.a.createElement(u.a.Image,null)),c.a.createElement("img",{src:g,alt:"",id:"image-preview",style:{display:E?"none":"block"}})),c.a.createElement(m.a,{className:"editor-content"},c.a.createElement("textarea",{className:"app-editor"})),c.a.createElement(N,P))}))},608:function(e,t,a){},609:function(e,t,a){},623:function(e,t,a){"use strict";var r=a(79),n=a.n(r),i=a(80),l=a.n(i),c=(a(14),a(0)),s=a.n(c),o=a(116),u=a(292),m=a(293),d=a(78);function p(e){var t=e.children,a=e.className,r=e.content,i=e.image,c=l()(Object(o.a)(i,"image"),"header",a),f=Object(u.a)(p,e),b=Object(m.a)(p,e);return s.a.createElement(b,n()({},f,{className:c}),d.a.isNil(t)?r:t)}p.handledProps=["as","children","className","content","image"],p.propTypes={};var f=p;function b(e){var t=e.className,a=e.square,r=e.rectangular,i=l()(Object(o.a)(a,"square"),Object(o.a)(r,"rectangular"),"image",t),c=Object(u.a)(b,e),d=Object(m.a)(b,e);return s.a.createElement(d,n()({},c,{className:i}))}b.handledProps=["as","className","rectangular","square"],b.propTypes={};var h=b;function E(e){var t=e.className,a=e.length,r=l()("line",a,t),i=Object(u.a)(E,e),c=Object(m.a)(E,e);return s.a.createElement(c,n()({},i,{className:r}))}E.handledProps=["as","className","length"],E.propTypes={};var g=E;function y(e){var t=e.children,a=e.className,r=e.content,i=l()("paragraph",a),c=Object(u.a)(y,e),o=Object(m.a)(y,e);return s.a.createElement(o,n()({},c,{className:i}),d.a.isNil(t)?r:t)}y.handledProps=["as","children","className","content"],y.propTypes={};var v=y;function O(e){var t=e.children,a=e.className,r=e.content,i=e.fluid,c=e.inverted,p=l()("ui",Object(o.a)(i,"fluid"),Object(o.a)(c,"inverted"),"placeholder",a),f=Object(u.a)(O,e),b=Object(m.a)(O,e);return s.a.createElement(b,n()({},f,{className:p}),d.a.isNil(t)?r:t)}O.handledProps=["as","children","className","content","fluid","inverted"],O.propTypes={},O.Header=f,O.Image=h,O.Line=g,O.Paragraph=v;t.a=O},95:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(18),l=a(31),c=a(622),s=a(649),o=a(23),u=a(646),m=a(656),d=a(657),p=a(636),f=a(653),b=a(373),h=a(19),E=a(106),g=a(11),y=a(651),v=a(645),O=a(105),I=O.a({email:O.b().email("Invalid email address").required("Required"),password:O.b().min(6,"Must be 6 characters at minimum").max(20,"Must be 20 characters or less").required("Required")}),N=Object(i.b)((function(e){return{auth:e.auth}}),{loginUserWithEmail:o.e})((function(e){var t=Object(E.a)({initialValues:{email:"",password:""},validationSchema:I,onSubmit:function(t){e.loginUserWithEmail(t)}});return e.auth.isAuthenticated?n.a.createElement(g.a,{to:"/"}):n.a.createElement("div",null,n.a.createElement(y.a,{attached:!0,header:"Already signed up?",content:"Login here"}),n.a.createElement(v.a,{className:"attached fluid segment",onSubmit:t.handleSubmit},n.a.createElement(y.a,{negative:!0,style:{display:e.auth.error?"block":"none"}},n.a.createElement("p",null,e.auth.error&&e.auth.error.errorMessage)),n.a.createElement(v.a.Input,Object.assign({name:"email",label:"Email",type:"text",placeholder:"Email"},t.getFieldProps("email"),t.touched.email&&t.errors.email?{error:t.errors.email}:{})),n.a.createElement(v.a.Input,Object.assign({name:"password",label:"Password",type:"password",placeholder:"Password"},t.getFieldProps("password"),t.touched.password&&t.errors.password?{error:t.errors.password}:{})),n.a.createElement(f.a,{type:"submit"},"Submit")))})),w=a(9),j=a.n(w),S=a(15),A=a(2),T=a(24),x=O.a({firstName:O.b().min(2,"Must be 2 characters at minimum").max(30,"Must be 30 characters or less").required("This field is required"),lastName:O.b().min(2,"Must be 2 characters at minimum").max(30,"Must be 30 characters or less").required("This field is required"),email:O.b().email("Invalid email address").required("This field is required"),password:O.b().min(6,"Must be 6 characters at minimum").max(20,"Must be 20 characters or less").required("This field is required")}),_=Object(i.b)((function(e){return{auth:e.auth,register:e.register}}),{registerUser:function(e){return function(){var t=Object(S.a)(j.a.mark((function t(a,r){var n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:A.REGISTER_WITH_EMAIL_LOADING}),t.prev=1,t.next=4,T.a.post("/register",e);case 4:n=t.sent,a({type:A.REGISTER_WITH_EMAIL_SUCCESS}),a({type:A.LOGIN_WITH_EMAIL_SUCCESS,payload:{token:n.data.token,me:n.data.me}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:A.REGISTER_WITH_EMAIL_FAIL,payload:{error:(null===t.t0||void 0===t.t0||null===(i=t.t0.response)||void 0===i?void 0:i.data.message)||t.t0.message}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){var t=Object(E.a)({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:x,onSubmit:function(t){e.registerUser(t)}});return e.auth.isAuthenticated?n.a.createElement(g.a,{to:"/"}):n.a.createElement("div",null,n.a.createElement(y.a,{attached:!0,header:"Welcome to our site!",content:"Fill out the form below to sign-up for a new account"}),n.a.createElement(v.a,{className:"attached fluid segment",onSubmit:t.handleSubmit},n.a.createElement(y.a,{negative:!0,style:{display:e.register.error?"block":"none"}},n.a.createElement("p",null,e.register.error&&e.register.error)),n.a.createElement(v.a.Input,Object.assign({name:"firstName",label:"First name",type:"text",placeholder:"First name"},t.getFieldProps("firstName"),t.touched.firstName&&t.errors.firstName?{error:t.errors.firstName}:{})),n.a.createElement(v.a.Input,Object.assign({name:"lastName",label:"Last name",type:"text",placeholder:"Last name"},t.getFieldProps("lastName"),t.touched.lastName&&t.errors.lastName?{error:t.errors.lastName}:{})),n.a.createElement(v.a.Input,Object.assign({name:"email",label:"Email",type:"email",placeholder:"Email"},t.getFieldProps("email"),t.touched.email&&t.errors.email?{error:t.errors.email}:{})),n.a.createElement(v.a.Input,Object.assign({name:"password",label:"Password",type:"password",placeholder:"Password"},t.getFieldProps("password"),t.touched.password&&t.errors.password?{error:t.errors.password}:{})),n.a.createElement(f.a,{type:"submit"},"Submit")))})),k=(a(112),Object(i.b)((function(e){return{}}),{})((function(e){var t=e.open,a=e.trigger;return n.a.createElement(u.a,{open:t,trigger:a},n.a.createElement(u.a.Header,null,"Welcome"),n.a.createElement(u.a.Content,null,n.a.createElement(m.a,null,n.a.createElement(d.a,{columns:2,stackable:!0},n.a.createElement(p.a,{vertical:!0},"Or"),n.a.createElement(d.a.Row,null,n.a.createElement(d.a.Column,null,n.a.createElement(_,null)),n.a.createElement(d.a.Column,null,n.a.createElement(N,null),n.a.createElement(p.a,{horizontal:!0},"Or Sign in with socials"),n.a.createElement(m.a,null,n.a.createElement(f.a,{color:"facebook",onClick:function(){return window.location.href=h.d}},n.a.createElement(b.a,{name:"facebook"})," Facebook"),n.a.createElement(f.a,{color:"google plus",onClick:function(){return window.location.href=h.e}},n.a.createElement(b.a,{name:"google"})," Google"))))))))}))),C=function(e){var t=e.auth,a=e.logOut,r=e.buttonText;if(!t.isAuthenticated||!t.me)return n.a.createElement(n.a.Fragment,null,n.a.createElement(k,{trigger:n.a.createElement("button",{id:"signInButton"},r)}));var i=n.a.createElement("span",null,n.a.createElement(c.a,{avatar:!0,src:t.me.profileImageUrl})," ",t.me.name);return n.a.createElement(s.a,{trigger:i},n.a.createElement(s.a.Menu,null,n.a.createElement(s.a.Item,{key:"new-story"},n.a.createElement(l.b,{to:"/new-story"},"New story")),n.a.createElement(s.a.Item,{key:"stories"},n.a.createElement(l.b,{to:"/my-stories"},"Stories")),n.a.createElement(s.a.Item,{key:"logout",onClick:function(){return a()}},"Logout")))};C.defaultProps={buttonText:"Sign in/Sign up"};t.a=Object(i.b)((function(e){return{auth:e.auth}}),{logOut:o.d})(C)}}]);
//# sourceMappingURL=3.97711ae4.chunk.js.map